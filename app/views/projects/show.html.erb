<div id="new-feature-holder">
  <div class="new-feature-form">
  </div>
</div>

<div class="container">
  <h2 class="text-center"><%= @project.title %> - Features</h2>

  <br />

  <% if @owner %>

    <div class="row">
      <div class="col-md-8 ml-auto mr-auto">

        <div class="row">
          <div class="col-6">

            <h4 class="text-center">Confirmed Users</h4>

            <ul class="list-group">
              <% @confirmed_users.each do |cu| %>
                <li class="list-group-item">
                  <%= cu.username %>
                </li>
              <% end %>
            </ul>

          </div>

          <div class="col-6">

            <h4 class="text-center">Unconfirmed Users</h4>

            <ul class="list-group">
              <% @unconfirmed_users.each do |uu| %>
                <li class="list-group-item">
                  <%= uu.username %>
                </li>
              <% end %>
            </ul>

          </div>
        </div>

      </div>
    </div>

    <br />

    <div align="center">
      <%= link_to 'New Feature', new_feature_path(proj_id: @project.id), class: "btn btn-success", remote: true %>
      <%= link_to 'Invite User', invite_users_path(@project.id), class: "btn btn-primary" %>
    </div>

    <br /><br />

  <% end %>

  <div class="row">
    <div class="col-md-4 ml-auto mr-auto">
      <h4 class="text-center show-features-header" id="pending-features">Pending Features</h4>

      <br />

      <ul class="list-group pending-features-ul pending-<%= current_user.username %>">
        <% @pending_features.each do |feat| %>
          <%= render 'uncompleted_feature', feat: feat, proj: @project, user: current_user %>
        <% end %>
      </ul>
    </div>

    <div class="col-md-4 ml-auto mr-auto">
      <h4 class="text-center show-features-header" id="existing-bugs">Existing Bugs</h4>

      <br />

      <ul class="list-group bug-features-ul pending-<%= current_user.username %>">
        <% @bug_features.each do |feat| %>
          <%= render 'uncompleted_feature', feat: feat, proj: @project, user: current_user %>
        <% end %>
      </ul>
    </div>

    <div class="col-md-4 ml-auto mr-auto">
      <h4 class="text-center show-features-header" id="completed-features">Completed Features</h4>

      <br />

      <ul class="list-group completed-features-ul">
        <% @completed_features.each do |feat| %>
          <%= render 'completed_feature', feat: feat %>
        <% end %>
      </ul>
    </div>
  </div>
</div>


<script type="text/javascript">
  $(document).ready( function() {
    $('#new-feature-holder').on('click', '#submit-new-feature-form', () => {
      $('#new-feature-holder').fadeOut('1000');
    });

    $('#new-feature-holder').on('click', '#close-new-feature-holder', () => {
      $('#new-feature-holder').fadeOut('1000');
    });
  });
</script>
