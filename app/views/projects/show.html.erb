<div id="new-feature-holder">
  <div class="new-feature-form">

  </div>
</div>

<div class="container">
  <h2 class="text-center">Features</h2>

  <br />

  <% if @owner %>

    <div align="center">
      <%= link_to 'New Feature', new_feature_path(proj_id: @project.id), class: "btn btn-success", remote: true %>
      <%= link_to 'Invite User', invite_users_path(@project.id), class: "btn btn-primary" %>
    </div>

    <br />

  <% end %>

  <div class="row">
    <div class="col-md-4 ml-auto mr-auto">
      <h4 class="text-center show-features-header" id="pending-features">Pending Features</h4>

      <br />

      <ul class="list-group">
        <% @pending_features.each do |feat| %>
          <li class="list-group-item" id="uncompleted-feat-<%= feat.id %>">

            <div class="features-info">
              <%= feat.name %>

              <span class="badge badge-pill badge-info">
                <%= feat.owner_name %>
              </span>
            </div>

            <% if feat.is_owner_or_not(current_user) %>
              <div class="close-feature-form-div" id="close-feature-form-<%= feat.id %>">
                <%= render 'close_feature', p: @project, f: feat %>
              </div>
            <% end %>
          </li>
        <% end %>
      </ul>
    </div>

    <div class="col-md-4 ml-auto mr-auto">
      <h4 class="text-center show-features-header" id="existing-bugs">Existing Bugs</h4>

      <br />

      <ul class="list-group">
        <% @bug_features.each do |feat| %>
          <li class="list-group-item" id="uncompleted-feat-<%= feat.id %>">

            <div class="features-info">
              <%= feat.name %>

              <span class="badge badge-pill badge-info">
                <%= feat.owner_name %>
              </span>
            </div>

            <% if feat.is_owner_or_not(current_user) %>
              <div class="close-feature-form-div" id="close-feature-form-<%= feat.id %>">
                <%= render 'close_feature', p: @project, f: feat %>
              </div>
            <% end %>
          </li>
        <% end %>
      </ul>
    </div>

    <div class="col-md-4 ml-auto mr-auto">
      <h4 class="text-center show-features-header" id="completed-features">Completed Features</h4>

      <br />

      <ul class="list-group completed-features-ul">
        <% @completed_features.each do |feat| %>
          <%= render 'completed_feature', feat: feat %>
        <% end %>
      </ul>
    </div>
  </div>
</div>


<script type="text/javascript">
  $(document).ready( function() {
    $('#new-feature-holder').on('click', '.close-feature-popup', () => {
      $('#new-feature-holder').fadeOut('1000');
    });
  });
</script>
